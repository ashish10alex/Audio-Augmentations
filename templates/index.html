<!doctype html>
<title>Audio augmentations</title>



<link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='style.css') }}">

<button id="dark-mode-button">Toggle dark mode</button>



{% if show_examples %}

<div class="header">
  <h1>Audio Augmentations</h1>
</div>

<h2> Example Augmentations</h2>

<div id="grid">

  <div id="box" class="box-dark">
    <audio id="audio" src='/static/audio/Un-Augmented.wav' controls preload='auto'></audio>
    <p id="aug-type"> Un augmented</p>
    <img src="static/images/Un-Augmented.png" width="300" height="200" alt="un-augmented"></img>
  </div>

  <div id="box" class="box-dark">
    <!-- <audio src='/static/music/test.wav' controls preload='auto'></audio> -->
    <audio id="audio" src='/static/audio/AddGaussianNoise.wav' controls preload='auto'></audio>
    <p id="aug-type"> Gaussian noise</p>
    <img src="static/images/AddGaussianNoise.png" width="300" height="200" alt="gaussian noise augmented"></img>
  </div>

  <div id="box" class="box-dark">
    <audio id="audio" src='/static/audio/AddShortNoises.wav' controls preload='auto'></audio>
    <p id="aug-type"> Short noise</p>
    <img src="static/images/AddShortNoises.png" width="300" height="200" alt="short noise augmented"></img>
  </div>

  <div id="box" class="box-dark">
    <audio id="audio" src='/static/audio/TimeMask.wav' controls preload='auto'></audio>
    <p id="aug-type">Time Mask</p>
    <img src="static/images/TimeMask.png" width="300" height="200" alt="time mask augmented"></img>
  </div>

  <div id="box" class="box-dark">
    <audio id="audio" src='/static/audio/FrequencyMask.wav' controls preload='auto'></audio>
    <p id="aug-type">Frequency Mask</p>
    <img src="static/images/FrequencyMask.png" width="300" height="200" alt="freqeuncy mask augmented"></img>
  </div>

  <div id="box" class="box-dark">
    <audio id="audio" src='/static/audio/TFMask.wav' controls preload='auto'></audio>
    <p id="aug-type">Time Frequency Mask</p>
    <img src="static/images/TFMask.png" width="300" height="200" alt="time-frequecy mask augmented"></img>
  </div>

  <div id="box" class="box-dark">
    <audio id="audio" src='/static/audio/TimeStretch.wav' controls preload='auto'></audio>
    <p id="aug-type">Time Stretch</p>
    <img src="static/images/TimeStretch.png" width="300" height="200" alt="time stretch augmented"></img>
  </div>

  <div id="box" class="box-dark">
    <audio id="audio" src='/static/audio/PitchShift.wav' controls preload='auto'></audio>
    <p id="aug-type">Pitch shift</p>
    <img src="static/images/PitchShift.png" width="300" height="200" alt="pitch shift augmented"></img>
  </div>

</div>
{% endif %}


<div class="header">
  <a href="#default" class="logo">
    <h1>Augment your Audio file</h1>
  </a>
</div>


<div class="file-upload">
  <form method="POST" action="/" enctype="multipart/form-data">
    <input type="submit" class="file-upload-btn" value="Generate Augmentations">
    <div class="image-upload-wrap">
      <input class="file-upload-input" type="file" name="file">
      <div class="drag-text">
        <h3>Drag and drop your audio file</h3>
        {% with messages = get_flashed_messages() %}
        {% if messages %}
        {% for message in messages %}
        <p class="error-para">{{ message }}</p>
        {% endfor %}
        {% endif %}
        {% endwith %}

      </div>
    </div>
</div>
</form>
</div>

<br>
<br>

<div id="grid">


<!-- Loop over uploaded files by the client and display them -->
  {% if images %}
  {% for key in images.keys() %}
  <div id="box" class="box-dark">
    <!-- removing preload auto takes care of previous audio being loaded issue -->
    <audio id="audio" src="/static/audio/client_aug_wavs/{{key}}.wav" controls></audio>
    <p id="aug-type-personal"> {{ key }} </p>
    <img src="{{ images[key] }}" width="250" height="50" alt=" {{ key }} Augmented "></img>
  </div>
  {% endfor %}
  {% endif %}

</div>




<script>

  let dark_mode_button = document.getElementById('dark-mode-button')
  dark_mode_button.addEventListener('click', () => {
    ToogleDarkLightMode()
  })
  

  function ToogleDarkLightMode() {

    // add here to change header div background color
    let header_element = document.getElementsByClassName('header')


    let box_element = document.querySelectorAll('#box')
    box_element.forEach(e => {
      // debugger
      if (e.className == 'box-light') { e.className = 'box-dark' }
      else { e.className = 'box-light' }
    })
    let body_element = document.body;
    body_element.classList.toggle("dark-mode");
  }

  // Change file name when uploading
  let file_input = document.getElementsByClassName('file-upload-input')[0];
  file_input.addEventListener("change", () => {
    let upload_text = document.getElementsByClassName("drag-text")[0].children[0]
    let error_message_elem = document.getElementsByClassName('error-para')[0]
    if (error_message_elem){
      error_message_elem.remove()
    }
    upload_text.textContent = document.getElementsByClassName('file-upload-input')[0].files[0].name
  })


</script>